<!--@layout(/layout/basic/layout.html)-->

<div module="member_checkpassword" class="memberArea gInnerMargin">
    <!--@css(/css/module/member/checkpassword.css)-->
    <div class="ec-base-box typeMember">
        {$enc_password}
        <div class="content">
            <svg xmlns="http://www.w3.org/2000/svg" width="61" height="60" viewBox="0 0 61 60" fill="none">
                <mask id="mask0_2921_20805" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="61" height="60">
                    <rect x="0.195312" width="60" height="60" fill="#D9D9D9"/>
                </mask>
                <g mask="url(#mask0_2921_20805)">
                    <path d="M28.1522 37.2019H31.7384C32.0776 37.2019 32.3716 37.0606 32.6203 36.7781C32.8691 36.4956 32.9518 36.185 32.8684 35.8463L31.6809 29.3075C32.4659 28.9708 33.098 28.4417 33.5772 27.72C34.0564 26.9983 34.2959 26.2006 34.2959 25.3269C34.2959 24.1302 33.8697 23.1058 33.0172 22.2538C32.1647 21.4021 31.1399 20.9763 29.9428 20.9763C28.7457 20.9763 27.7218 21.4021 26.8709 22.2538C26.0201 23.1058 25.5947 24.1302 25.5947 25.3269C25.5947 26.2006 25.8343 26.9983 26.3134 27.72C26.7926 28.4417 27.4247 28.9708 28.2097 29.3075L27.0222 35.8463C26.9389 36.185 27.0216 36.4956 27.2703 36.7781C27.5191 37.0606 27.813 37.2019 28.1522 37.2019ZM29.9453 53.7544C29.6857 53.7544 29.4309 53.7335 29.1809 53.6919C28.9309 53.6502 28.6889 53.5877 28.4547 53.5044C23.1826 51.6294 18.988 48.305 15.8709 43.5313C12.7539 38.7571 11.1953 33.6056 11.1953 28.0769V16.8175C11.1953 15.8679 11.4684 15.0131 12.0147 14.2531C12.5605 13.4935 13.2666 12.9429 14.1328 12.6012L28.3634 7.28875C28.8989 7.09625 29.4261 7 29.9453 7C30.4645 7 30.9918 7.09625 31.5272 7.28875L45.7578 12.6012C46.6241 12.9429 47.3301 13.4935 47.8759 14.2531C48.4222 15.0131 48.6953 15.8679 48.6953 16.8175V28.0769C48.6953 33.6056 47.1368 38.7571 44.0197 43.5313C40.9026 48.305 36.708 51.6294 31.4359 53.5044C31.2018 53.5877 30.9597 53.6502 30.7097 53.6919C30.4597 53.7335 30.2049 53.7544 29.9453 53.7544Z" fill="#1B8862"/>
                </g>
            </svg>
            <strong>
                개인정보를 안전하게 보호하기 위해<br>인증 절차가 필요해요
            </strong>
            <p>비밀번호를 한 번 더 확인해 주세요.</p>
            <fieldset>
                <label>비밀번호</label>
                <div class="password">{$form.cp_password}</div>
            </fieldset>
        </div>
    </div>
    <div class="ec-base-button gBottom">
        <a href="#none" class="btnSubmitFix sizeM js-checkpw-btn disabled" onclick="{$check_password_action}">확인</a>
    </div>
</div>

<script src="https://login2.cafe24ssl.com/crypt/AuthSSLManager.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const pwInput = document.querySelector('[name="cp_password"]');
    if (!pwInput) return;

    const pwWrap = pwInput.closest('.password') || pwInput.parentElement;
    if (!pwWrap) return;

    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'pw-toggle';
    btn.setAttribute('aria-label', '비밀번호 표시');
    btn.innerHTML = `
        <svg class="eye" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
        <path d="M6.05671 7.94206C5.8067 7.69196 5.66628 7.35279 5.66634 6.99915C5.6664 6.64552 5.80694 6.3064 6.05704 6.05639C6.30714 5.80638 6.64631 5.66596 6.99994 5.66602C7.35358 5.66608 7.6927 5.80662 7.94271 6.05672M10.1207 3.88465C9.18549 3.29955 8.1031 2.9927 7 2.99998C4.6 2.99998 2.6 4.33331 1 6.99998C1.848 8.41331 2.808 9.45198 3.88 10.116M5.78667 10.88C6.18603 10.9608 6.59254 11.001 7 11C9.4 11 11.4 9.66665 13 6.99998C12.556 6.25998 12.0807 5.62198 11.5747 5.08665M1 13L13 1" stroke="#393939" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg class="eye-off" xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 14 10" fill="none">
        <path d="M6.05671 4.05794C5.8067 4.30804 5.66628 4.64721 5.66634 5.00084C5.6664 5.35448 5.80694 5.6936 6.05704 5.94361C6.30714 6.19362 6.64631 6.33404 6.99994 6.33398C7.35358 6.33392 7.6927 6.19338 7.94271 5.94328M10.1207 8.11535C9.18549 8.70045 8.1031 9.0073 7 9.00002C4.6 9.00002 2.6 7.66669 1 5.00002C1.848 3.58669 2.808 2.54802 3.88 1.88402C4.42649 1.49518 5.37882 1.21267 5.78667 1.12002C6.18603 1.03917 6.59254 0.998969 7 1.00002C9.4 1.00002 11.4 2.33335 13 5.00002C12.556 5.74002 12.0807 6.37802 11.5747 6.91335C11.2969 7.20147 10.6172 7.84523 10.1207 8.11535Z" stroke="#393939" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    `;
    pwWrap.appendChild(btn);

    btn.addEventListener('click', function() {
        if (pwInput.type === 'password') {
        pwInput.type = 'text';
        btn.classList.add('on');
        btn.setAttribute('aria-label', '비밀번호 숨기기');
        } else {
        pwInput.type = 'password';
        btn.classList.remove('on');
        btn.setAttribute('aria-label', '비밀번호 표시');
        }
        pwInput.focus();
        const v = pwInput.value; pwInput.value = ''; pwInput.value = v;
    });
});

document.addEventListener("DOMContentLoaded", function () {
    const pwInput = document.querySelector('[name="cp_password"]');
    const submitBtn = document.querySelector('.btnSubmitFix');

    if (!pwInput || !submitBtn) return;

    if (!pwInput.value) {
        submitBtn.classList.add('disabled');
    }

    pwInput.addEventListener('input', function() {
        if (pwInput.value.trim() !== "") {
        submitBtn.classList.remove('disabled');
        } else {
        submitBtn.classList.add('disabled');
        }
    });
});
</script>

<style>
    #contents {
        padding: 16px;
        height: calc(100vh - 54px) !important;
        min-height: 0 !important;
    }
</style>